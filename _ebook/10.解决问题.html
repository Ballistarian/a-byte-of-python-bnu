
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>第十章：解决问题</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    
        
        <link rel="stylesheet" href="gitbook/ebook.css">
        
    

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/ebook.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    </head>
    <body>
        
<div class="page">
    
        <h1 class="book-chapter book-chapter-1">第十章：解决问题</h1>
        <div class="section">
            <h1 id="&#x89E3;&#x51B3;&#x95EE;&#x9898;">&#x89E3;&#x51B3;&#x95EE;&#x9898;</h1>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x63A2;&#x7D22;&#x4E86; Python &#x8BED;&#x8A00;&#x4E2D;&#x7684;&#x8BB8;&#x591A;&#x90E8;&#x5206;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C06;&#x901A;&#x8FC7;&#x8BBE;&#x8BA1;&#x5E76;&#x7F16;&#x5199;&#x4E00;&#x6B3E;&#x7A0B;&#x5E8F;&#x6765;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x628A;&#x8FD9;&#x4E9B;&#x90E8;&#x5206;&#x7EC4;&#x5408;&#x5230;&#x4E00;&#x8D77;&#x3002;&#x8FD9;&#x4E9B;&#x7A0B;&#x5E8F;&#x4E00;&#x5B9A;&#x662F;&#x80FD;<em>&#x505A;&#x5230;</em>&#x4E00;&#x4E9B;&#x6709;&#x7528;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x8FD9;&#x5176;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x53BB;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x9760;&#x4F60;&#x81EA;&#x5DF1;&#x6765;&#x7F16;&#x5199;&#x4E00;&#x4EFD; Python &#x811A;&#x672C;&#x3002;</p>
<h2 id="&#x95EE;&#x9898;">&#x95EE;&#x9898;</h2>
<p>&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x5982;&#x4E0B;&#xFF1A;</p>
<blockquote>
<p>&#x6211;&#x60F3;&#x8981;&#x4E00;&#x6B3E;&#x7A0B;&#x5E8F;&#x6765;&#x5907;&#x4EFD;&#x6211;&#x6240;&#x6709;&#x7684;&#x91CD;&#x8981;&#x6587;&#x4EF6;&#x3002;</p>
</blockquote>
<p>&#x867D;&#x7136;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x4FE1;&#x606F;&#x6709;&#x52A9;&#x4E8E;&#x8BA9;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x89C4;&#x5212;&#x4E00;&#x4EFD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;<em>&#x5206;&#x6790;&#xFF08;Analysis&#xFF09;</em>&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x6307;&#x5B9A;<em>&#x54EA;&#x4E9B;</em>&#x6587;&#x4EF6;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#xFF1F;&#x5B83;&#x4EEC;&#x5E94;&#x8BE5;<em>&#x5982;&#x4F55;</em>&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#xFF1F;&#x50A8;&#x5B58;&#x5230;<em>&#x54EA;&#x91CC;</em>?</p>
<p>&#x5728;&#x6B63;&#x786E;&#x5730;&#x5206;&#x6790;&#x4E86;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x8FC7;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4FBF;&#x5F00;&#x59CB;<em>&#x8BBE;&#x8BA1;&#xFF08;Design&#xFF09;</em>&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x5217;&#x51FA;&#x4E00;&#x4EFD;&#x5173;&#x4E8E;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#x5E94;&#x5982;&#x4F55;&#x8FD0;&#x8F6C;&#x7684;&#x6E05;&#x5355;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x6848;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x5DF2;&#x7ECF;&#x7F16;&#x5199;&#x4E86;&#x5982;&#x4E0B;&#x6E05;&#x5355;&#x6765;&#x8BF4;&#x660E;<em>&#x6211;</em>&#x5C06;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x7531;&#x4F60;&#x6765;&#x8BBE;&#x8BA1;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x505A;&#x51FA;&#x540C;&#x6837;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x6709;&#x5176;&#x81EA;&#x5DF1;&#x7684;&#x884C;&#x4E8B;&#x65B9;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;&#x51FA;&#x73B0;&#x4E0D;&#x540C;&#x662F;&#x5B8C;&#x5168;&#x6B63;&#x5E38;&#x3001;&#x4E14;&#x6B63;&#x786E;&#x7684;&#x3002;</p>
<ul>
<li>&#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x4E0E;&#x76EE;&#x5F55;&#x5E94;&#x5728;&#x4E00;&#x4EFD;&#x5217;&#x8868;&#x4E2D;&#x4E88;&#x4EE5;&#x6307;&#x5B9A;&#x3002;</li>
<li>&#x5907;&#x4EFD;&#x5FC5;&#x987B;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;&#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E2D;&#x3002;</li>
<li>&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5C06;&#x6253;&#x5305;&#x538B;&#x7F29;&#x6210; zip &#x6587;&#x4EF6;&#x3002;</li>
<li>zip &#x538B;&#x7F29;&#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x7531;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x4E0E;&#x65F6;&#x95F4;&#x6784;&#x6210;&#x3002;</li>
<li>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5728;&#x4EFB;&#x4F55; GNU/Linux &#x6216; Unix &#x53D1;&#x884C;&#x7248;&#x4E2D;&#x90FD;&#x4F1A;&#x9ED8;&#x8BA4;&#x63D0;&#x4F9B;&#x7684;&#x6807;&#x51C6; <code>zip</code> &#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x4F60;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x5230;&#x53EA;&#x8981;&#x6709;&#x547D;&#x4EE4;&#x884C;&#x754C;&#x9762;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x538B;&#x7F29;&#x6216;&#x5F52;&#x6863;&#x547D;&#x4EE4;&#x3002;</li>
</ul>
<blockquote>
<p><strong>&#x9488;&#x5BF9; Windows &#x7528;&#x6237;&#x7684;&#x63D0;&#x793A;</strong></p>
<p>Windows &#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4ECE; <a href="http://gnuwin32.sourceforge.net/packages/zip.htm" target="_blank">GnuWin32 &#x9879;&#x76EE;&#x9875;&#x9762;</a> &#x4E0A;&#x4E0B;&#x8F7D;&#x5E76;<a href="http://gnuwin32.sourceforge.net/downlinks/zip.php" target="_blank">&#x5B89;&#x88C5;</a> <code>zip</code> &#x547D;&#x4EE4;&#xFF0C;&#x5E76;&#x5C06; <code>C:\Program Files\GnuWin32\bin</code> &#x6DFB;&#x52A0;&#x81F3;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x7684; <code>PATH</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E00;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x4E0E;<a href="installation.md#dos-prompt">&#x6211;&#x4EEC;&#x4E3A;&#x4F7F;&#x7CFB;&#x7EDF;&#x8BC6;&#x522B; Python &#x547D;&#x4EE4;&#x672C;&#x8EAB;&#x6240;&#x505A;&#x7684;&#x4E8B;&#x60C5;</a>&#x76F8;&#x540C;&#x3002;</p>
</blockquote>
<h2 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;">&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2>
<p>&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x65B9;&#x6848;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x76F8;&#x5F53;&#x7A33;&#x5B9A;&#xFF0C;&#x6211;&#x4EEC;&#x4FBF;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x7F16;&#x5199;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;<em>&#x5B9E;&#x73B0;&#xFF08;Implementation&#xFF09;</em>&#x6211;&#x4EEC;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>
<p>&#x5C06;&#x4E0B;&#x8FF0;&#x4EE3;&#x7801;&#x4FDD;&#x5B58;&#x4E3A; <code>backup_ver1.py</code>&#xFF1A;</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># 1. &#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x4E0E;&#x76EE;&#x5F55;&#x5C06;&#x88AB;</span>
<span class="hljs-comment"># &#x6307;&#x5B9A;&#x5728;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x4E2D;&#x3002;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#x5728; Windows &#x4E0B;&#xFF1A;</span>
<span class="hljs-comment"># source = [&apos;&quot;C:\\My Documents&quot;&apos;, &apos;C:\\Code&apos;]</span>
<span class="hljs-comment"># &#x53C8;&#x4F8B;&#x5982;&#x5728; Mac OS X &#x4E0E; Linux &#x4E0B;&#xFF1A;</span>
source = [<span class="hljs-string">&apos;/Users/swa/notes&apos;</span>]
<span class="hljs-comment"># &#x5728;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x5230;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x4F7F;&#x7528;&#x53CC;&#x5F15;&#x53F7;</span>
<span class="hljs-comment"># &#x7528;&#x4EE5;&#x62EC;&#x8D77;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x7A7A;&#x683C;&#x7684;&#x540D;&#x79F0;&#x3002;</span>

<span class="hljs-comment">#2. &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;</span>
<span class="hljs-comment">#&#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E2D;</span>
<span class="hljs-comment">#&#x4F8B;&#x5982;&#x5728; Windows &#x4E0B;&#xFF1A;</span>
<span class="hljs-comment"># target_dir = &apos;E:\\Backup&apos;</span>
<span class="hljs-comment"># &#x53C8;&#x4F8B;&#x5982;&#x5728; Mac OS X &#x548C; Linux &#x4E0B;&#xFF1A;</span>
target_dir = <span class="hljs-string">&apos;/Users/swa/backup&apos;</span>
<span class="hljs-comment"># &#x8981;&#x8BB0;&#x5F97;&#x5C06;&#x8FD9;&#x91CC;&#x7684;&#x76EE;&#x5F55;&#x5730;&#x5740;&#x4FEE;&#x6539;&#x81F3;&#x4F60;&#x5C06;&#x4F7F;&#x7528;&#x7684;&#x8DEF;&#x5F84;</span>

<span class="hljs-comment"># 3. &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5C06;&#x6253;&#x5305;&#x538B;&#x7F29;&#x6210; zip &#x6587;&#x4EF6;&#x3002;</span>
<span class="hljs-comment"># 4. zip &#x538B;&#x7F29;&#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x7531;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x4E0E;&#x65F6;&#x95F4;&#x6784;&#x6210;&#x3002;</span>
target = target_dir + os.sep + \
         time.strftime(<span class="hljs-string">&apos;%Y%m%d%H%M%S&apos;</span>) + <span class="hljs-string">&apos;.zip&apos;</span>

<span class="hljs-comment"># &#x5982;&#x679C;&#x76EE;&#x6807;&#x76EE;&#x5F55;&#x8FD8;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8FDB;&#x884C;&#x521B;&#x5EFA;</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(target_dir):
    os.mkdir(target_dir)  <span class="hljs-comment"># &#x521B;&#x5EFA;&#x76EE;&#x5F55;</span>

<span class="hljs-comment"># 5. &#x6211;&#x4EEC;&#x4F7F;&#x7528; zip &#x547D;&#x4EE4;&#x5C06;&#x6587;&#x4EF6;&#x6253;&#x5305;&#x6210; zip &#x683C;&#x5F0F;</span>
zip_command = <span class="hljs-string">&apos;zip -r {0} {1}&apos;</span>.format(target,
                                      <span class="hljs-string">&apos; &apos;</span>.join(source))

<span class="hljs-comment"># &#x8FD0;&#x884C;&#x5907;&#x4EFD;</span>
print(<span class="hljs-string">&apos;Zip command is:&apos;</span>)
print(zip_command)
print(<span class="hljs-string">&apos;Running:&apos;</span>)
<span class="hljs-keyword">if</span> os.system(zip_command) == <span class="hljs-number">0</span>:
    print(<span class="hljs-string">&apos;Successful backup to&apos;</span>, target)
<span class="hljs-keyword">else</span>:
    print(<span class="hljs-string">&apos;Backup FAILED&apos;</span>)
</code></pre>

<p>&#x8F93;&#x51FA;&#xFF1A;</p>
<pre><code>$ python backup_ver1.py
Zip command is:
zip -r /Users/swa/backup/20140328084844.zip /Users/swa/notes
Running:
  adding: Users/swa/notes/ (stored 0%)
  adding: Users/swa/notes/blah1.txt (stored 0%)
  adding: Users/swa/notes/blah2.txt (stored 0%)
  adding: Users/swa/notes/blah3.txt (stored 0%)
Successful backup to /Users/swa/backup/20140328084844.zip
</code></pre>

<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x6B63;&#x5904;&#x4E8E;<em>&#x6D4B;&#x8BD5;&#xFF08;Testing&#xFF09;</em>&#x9636;&#x6BB5;&#xFF0C;&#x5728;&#x8FD9;&#x4E00;&#x9636;&#x6BB5;&#x6211;&#x4EEC;&#x6D4B;&#x8BD5;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#x662F;&#x5426;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x5176;&#x884C;&#x4E3A;&#x4E0D;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x9884;&#x671F;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5BF9;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C; <em>Debug</em> &#x5DE5;&#x4F5C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x79FB;&#x9664;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684; <em>Bug</em>&#xFF08;&#x9519;&#x8BEF;&#xFF09;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4E0A;&#x9762;&#x7684;&#x7A0B;&#x5E8F;&#x4E0D;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x590D;&#x5236;&#x6253;&#x5370;&#x5728; <code>Zip command is</code> &#x540E;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5C06;&#x5176;&#x7C98;&#x8D34;&#x81F3; shell&#xFF08;&#x5728; GNU/Linux &#x4E0E; Mac OS X &#x73AF;&#x5883;&#x4E2D;&#xFF09;&#x6216; <code>cmd</code>&#xFF08;&#x5BF9;&#x4E8E; Windows &#x73AF;&#x5883;&#xFF09;&#xFF0C;&#x770B;&#x770B;&#x5B58;&#x5728;&#x4EC0;&#x4E48;&#x9519;&#x8BEF;&#x5E76;&#x5C1D;&#x8BD5;&#x5C06;&#x5176;&#x4FEE;&#x590D;&#x3002;&#x540C;&#x65F6;&#x4F60;&#x8FD8;&#x9700;&#x8981;&#x68C0;&#x67E5; zip &#x547D;&#x4EE4;&#x624B;&#x518C;&#x6765;&#x770B;&#x770B;&#x662F;&#x4E0D;&#x662F;&#x54EA;&#x91CC;&#x5B58;&#x5728;&#x9519;&#x8BEF;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x6761;&#x547D;&#x4EE4;&#x6210;&#x529F;&#x8FD0;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x80FD;&#x662F;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x5728; Python &#x7A0B;&#x5E8F;&#x672C;&#x8EAB;&#x4E4B;&#x4E2D;&#xFF0C;&#x56E0;&#x6B64;&#x4F60;&#x9700;&#x8981;&#x68C0;&#x67E5;&#x4F60;&#x7684;&#x7A0B;&#x5E8F;&#x662F;&#x5426;&#x5982;&#x4E0A;&#x9762;&#x6240;&#x5C55;&#x793A;&#x90A3;&#x756A;&#x3002;</p>
<p><strong>&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;</strong></p>
<p>&#x4F60;&#x4F1A;&#x6CE8;&#x610F;&#x5230;&#x6211;&#x4EEC;&#x662F;&#x5982;&#x4F55;&#x4E00;&#x6B65;&#x6B65;&#x5C06;&#x6211;&#x4EEC;&#x7684;<em>&#x8BBE;&#x8BA1;</em>&#x8F6C;&#x5316;&#x4E3A;<em>&#x4EE3;&#x7801;</em>&#x7684;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x9996;&#x5148;&#x5BFC;&#x5165; <code>os</code> &#x4E0E; <code>time</code> &#x6A21;&#x5757;&#x4EE5;&#x51C6;&#x5907;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5728; <code>source</code> &#x5217;&#x8868;&#x4E2D;&#x6307;&#x5B9A;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x4E0E;&#x76EE;&#x5F55;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x6211;&#x4EEC;&#x6240;&#x6709;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x6807;&#x76EE;&#x5F55;&#x5728; <code>target_dir</code> &#x53D8;&#x91CF;&#x4E2D;&#x4E88;&#x4EE5;&#x6307;&#x5B9A;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x521B;&#x5EFA;&#x7684; zip &#x5F52;&#x6863;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x5B57;&#x7531;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x4E0E;&#x65F6;&#x95F4;&#x6784;&#x6210;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x901A;&#x8FC7; <code>time.strftime()</code> &#x51FD;&#x6570;&#x6765;&#x521B;&#x5EFA;&#x3002;&#x6587;&#x4EF6;&#x540D;&#x5C06;&#x4EE5; <code>.zip</code> &#x4F5C;&#x4E3A;&#x6269;&#x5C55;&#x540D;&#xFF0C;&#x5E76;&#x5B58;&#x50A8;&#x5728; <code>target_dir</code> &#x76EE;&#x5F55;&#x4E2D;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F; <code>os.sep</code> &#x53D8;&#x91CF;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x2014;&#x2014;&#x5B83;&#x5C06;&#x6839;&#x636E;&#x4F60;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7ED9;&#x51FA;&#x76F8;&#x5E94;&#x7684;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x5728; GNU/Linux &#x4E0E; Unix &#x4E2D;&#x5B83;&#x4F1A;&#x662F; <code>&apos;/&apos;</code>&#xFF0C;&#x5728; Windows &#x4E2D;&#x5B83;&#x4F1A;&#x662F; <code>&apos;\\&apos;</code>&#xFF0C;&#x5728; Mac OS &#x4E2D;&#x5B83;&#x4F1A;&#x662F; <code>&apos;:&apos;</code>&#x3002;&#x4F7F;&#x7528; <code>os.sep</code> &#x800C;&#x975E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x5B57;&#x7B26;&#x6709;&#x52A9;&#x4E8E;&#x4F7F;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#x53D8;&#x5F97;&#x53EF;&#x79FB;&#x690D;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x5728;&#x4E0A;&#x8FF0;&#x8FD9;&#x4E9B;&#x7CFB;&#x7EDF;&#x4E2D;&#x90FD;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;</p>
<p><code>time.strftime()</code> &#x51FD;&#x6570;&#x4F1A;&#x9075;&#x5FAA;&#x67D0;&#x4E9B;&#x683C;&#x5F0F;&#xFF08;Specification&#xFF09;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x79CD;&#x5C31;&#x5982;&#x6211;&#x4EEC;&#x5728;&#x4E0A;&#x65B9;&#x7A0B;&#x5E8F;&#x4E2D;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x90A3;&#x6837;&#x3002;<code>%Y</code> &#x5C06;&#x88AB;&#x66FF;&#x6362;&#x6210;&#x5E26;&#x6709;&#x5177;&#x4F53;&#x4E16;&#x7EAA;&#x7684;&#x5E74;&#x4EFD;&#x3002;<code>%m</code> &#x5C06;&#x4F1A;&#x88AB;&#x66FF;&#x6362;&#x6210;&#x4EE5; <code>01</code> &#x81F3; <code>12</code> &#x7684;&#x5341;&#x8FDB;&#x5236;&#x6570;&#x6240;&#x8868;&#x793A;&#x7684;&#x6708;&#x4EFD;&#x3002;&#x6709;&#x5173;&#x8FD9;&#x4E9B;&#x683C;&#x5F0F;&#x7684;&#x5168;&#x90E8;&#x5217;&#x8868;&#x53EF;&#x4EE5;&#x5728;<a href="http://docs.python.org/3/library/time.html#time.strftime" target="_blank"> Python &#x53C2;&#x8003;&#x624B;&#x518C;</a>&#x4E2D;&#x67E5;&#x8BE2;&#x5230;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;<em>&#x8FDE;&#x63A5;&#xFF08;Concatenates&#xFF09;</em>&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x52A0;&#x6CD5;&#xFF08;<code>+</code>&#xFF09;&#x8FD0;&#x7B97;&#x7B26;&#x6765;&#x521B;&#x5EFA;&#x76EE;&#x6807; zip &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5B83;&#x5C06;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x8FDE;&#x63A5;&#x5230;&#x4E00;&#x8D77;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E32;&#x5B57;&#x7B26;&#x4E32; <code>zip_command</code>&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#x4E86;&#x6211;&#x4EEC;&#x8981;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x6761;&#x547D;&#x4EE4;&#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x628A;&#x5B83;&#x62F7;&#x8D1D;&#x5230; Shell&#xFF08;GNU/Linux &#x7EC8;&#x7AEF;&#x6216; DOS &#x63D0;&#x793A;&#x7B26;&#xFF09;&#x4E2D;&#x8FDB;&#x884C;&#x68C0;&#x67E5;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684; <code>zip</code> &#x547D;&#x4EE4;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x9009;&#x9879;&#x4E0E;&#x53C2;&#x6570;&#x9700;&#x8981;&#x4F20;&#x9012;&#x3002;<code>-r</code> &#x9009;&#x9879;&#x7528;&#x4EE5;&#x6307;&#x5B9A; zip &#x547D;&#x4EE4;&#x5E94;&#x8BE5;<strong>&#x9012;&#x5F52;&#x5730;</strong>&#xFF08;<strong>R</strong>ecursively&#xFF09;&#x5BF9;&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5B83;&#x5E94;&#x8BE5;&#x5305;&#x62EC;&#x6240;&#x6709;&#x7684;&#x5B50;&#x6587;&#x4EF6;&#x5939;&#x4E0E;&#x5176;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x8FD9;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#x7ED3;&#x5408;&#x5230;&#x4E00;&#x8D77;&#x5E76;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x5FEB;&#x6377;&#x65B9;&#x5F0F;&#x4F5C; <code>-qr</code>&#x3002;&#x9009;&#x9879;&#x540E;&#x9762;&#x8DDF;&#x7740;&#x7684;&#x662F;&#x5C06;&#x8981;&#x521B;&#x5EFA;&#x7684; zip &#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x518D;&#x5F80;&#x540E;&#x662F;&#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x4E0E;&#x76EE;&#x5F55;&#x7684;&#x5217;&#x8868;&#x3002;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x5DF2;&#x7ECF;&#x8BA8;&#x8BBA;&#x8FC7;&#x5E76;&#x5DF2;&#x4E86;&#x89E3;&#x8BE5;&#x5982;&#x4F55;&#x8FD0;&#x7528;&#x7684;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x65B9;&#x6CD5; <code>join</code> &#x6765;&#x5C06;&#x5217;&#x8868; <code>source</code> &#x8F6C;&#x6362;&#x6210;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x968F;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x7EC8;&#x4E8E;&#x53EF;&#x4EE5;<em>&#x8FD0;&#x884C;</em>&#x8FD9;&#x4E00;&#x4F7F;&#x7528;&#x4E86; <code>os.system</code> &#x51FD;&#x6570;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x8FD9;&#x4E00;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x4F7F;&#x547D;&#x4EE4;&#x50CF;&#x662F;&#x4ECE;<em>&#x7CFB;&#x7EDF;</em>&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x4ECE; shell &#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x2014;&#x2014;&#x5982;&#x679C;&#x8FD0;&#x884C;&#x6210;&#x529F;&#xFF0C;&#x5B83;&#x5C06;&#x8FD4;&#x56DE; <code>0</code>&#xFF0C;&#x5982;&#x679C;&#x8FD0;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x6839;&#x636E;&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x6210;&#x529F;&#x8FD8;&#x662F;&#x5931;&#x8D25;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x6253;&#x5370;&#x51FA;&#x4E0E;&#x4E4B;&#x76F8;&#x5E94;&#x7684;&#x4FE1;&#x606F;&#x6765;&#x544A;&#x8BC9;&#x4F60;&#x5907;&#x4EFD;&#x7684;&#x7ED3;&#x679C;&#x7A76;&#x7ADF;&#x5982;&#x4F55;&#x3002;</p>
<p>&#x5C31;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x4FBF;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4EFD;&#x7528;&#x4EE5;&#x5907;&#x4EFD;&#x6211;&#x4EEC;&#x7684;&#x91CD;&#x8981;&#x6587;&#x4EF6;&#x7684;&#x811A;&#x672C;&#xFF01;</p>
<blockquote>
<p><strong>&#x9488;&#x5BF9; Windows &#x7528;&#x6237;&#x7684;&#x63D0;&#x793A;</strong></p>
<p>&#x9664;&#x4E86;&#x4F7F;&#x7528;&#x53CC;&#x53CD;&#x659C;&#x6760;&#x8F6C;&#x4E49;&#x5E8F;&#x5217;&#xFF0C;&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x539F;&#x59CB;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x4F8B;&#x5982;&#x4F7F;&#x7528; <code>&apos;C:\\Documents&apos;</code> &#x6216; <code>r&apos;C:\Documents&apos;</code>&#x3002;&#x7136;&#x800C;&#xFF0C;<em>&#x4E0D;</em>&#x8981;&#x4F7F;&#x7528; <code>&apos;C:\Documents&apos;</code>&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5C06;&#x88AB;&#x8BC6;&#x522B;&#x4E3A;&#x4F60;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x672A;&#x77E5;&#x7684;&#x8F6C;&#x4E49;&#x5E8F;&#x5217; <code>\D</code> &#x6765;&#x7ED3;&#x675F;&#x8DEF;&#x5F84;&#x7684;&#x8F93;&#x5165;&#x3002;</p>
</blockquote>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x62E5;&#x6709;&#x4E86;&#x4E00;&#x4EFD;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x7684;&#x5907;&#x4EFD;&#x811A;&#x672C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x5B83;&#x3002;&#x8FD9;&#x88AB;&#x79F0;&#x4F5C;&#x8F6F;&#x4EF6;&#x7684;<em>&#x64CD;&#x4F5C;&#xFF08;Operation&#xFF09;</em>&#x6216;<em>&#x90E8;&#x7F72;&#xFF08;Deployment&#xFF09;</em>&#x9636;&#x6BB5;&#x3002;</p>
<p>&#x4E0A;&#x9762;&#x6240;&#x5C55;&#x793A;&#x7684;&#x7A0B;&#x5E8F;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#xFF08;&#x901A;&#x5E38;&#xFF09;&#x7B2C;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x90FD;&#x4E0D;&#x4F1A;&#x6309;&#x7167;&#x4F60;&#x6240;&#x671F;&#x671B;&#x7684;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#x3002;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x4F60;&#x6CA1;&#x6709;&#x6B63;&#x786E;&#x5730;&#x8BBE;&#x8BA1;&#x7A0B;&#x5E8F;&#xFF0C;&#x6216;&#x5982;&#x679C;&#x4F60;&#x5728;&#x8F93;&#x5165;&#x4EE3;&#x7801;&#x65F6;&#x51FA;&#x73B0;&#x4E86;&#x9519;&#x8BEF;&#x3002;&#x51FA;&#x73B0;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;&#x5728;&#x6070;&#x5F53;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x56DE;&#x5230;&#x8BBE;&#x8BA1;&#x9636;&#x6BB5;&#xFF0C;&#x6216;&#x8005;&#x4F60;&#x9700;&#x8981;&#x5BF9;&#x4F60;&#x7684;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C; Debug &#x5DE5;&#x4F5C;&#x3002;</p>
<h2 id="&#x7B2C;&#x4E8C;&#x7248;">&#x7B2C;&#x4E8C;&#x7248;</h2>
<p>&#x6211;&#x4EEC;&#x7684;&#x7B2C;&#x4E00;&#x7248;&#x811A;&#x672C;&#x5DF2;&#x7ECF;&#x80FD;&#x591F;&#x5DE5;&#x4F5C;&#x4E86;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x5BF9;&#x5B83;&#x4F5C;&#x51FA;&#x4E00;&#x4E9B;&#x6539;&#x8FDB;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5B83;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x5730;&#x5728;&#x6BCF;&#x4E00;&#x5929;&#x90FD;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E00;&#x9636;&#x6BB5;&#x79F0;&#x4E4B;&#x4E3A;&#x8F6F;&#x4EF6;&#x7684;<em>&#x7EF4;&#x62A4;&#xFF08;Maintenance&#xFF09;</em>&#x9636;&#x6BB5;&#x3002;</p>
<p>&#x6211;&#x8BA4;&#x4E3A;&#x6709;&#x4E00;&#x79CD;&#x9887;&#x4E3A;&#x6709;&#x7528;&#x7684;&#x6539;&#x8FDB;&#x662F;&#x8D77;&#x7528;&#x4E00;&#x79CD;&#x66F4;&#x597D;&#x7684;&#x6587;&#x4EF6;&#x547D;&#x540D;&#x673A;&#x5236;&#x2014;&#x2014;&#x4F7F;&#x7528;<em>&#x65F6;&#x95F4;</em>&#x4F5C;&#x4E3A;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x5B58;&#x50A8;&#x5728;&#x4EE5;&#x5F53;&#x524D;<em>&#x65E5;&#x671F;</em>&#x4E3A;&#x540D;&#x5B57;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E00;&#x6587;&#x4EF6;&#x5939;&#x5219;&#x7167;&#x5E38;&#x5B58;&#x50A8;&#x5728;&#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E0B;&#x3002;&#x8FD9;&#x79CD;&#x673A;&#x5236;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x6709;&#x70B9;&#x5728;&#x4E8E;&#x4F60;&#x7684;&#x5907;&#x4EFD;&#x4F1A;&#x4EE5;&#x5206;&#x5C42;&#x7684;&#x5F62;&#x5F0F;&#x4E88;&#x4EE5;&#x5B58;&#x50A8;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5F97;&#x5B83;&#x4EEC;&#x80FD;&#x66F4;&#x6613;&#x4E8E;&#x7BA1;&#x7406;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x4F18;&#x70B9;&#x662F;&#x6587;&#x4EF6;&#x540D;&#x80FD;&#x591F;&#x66F4;&#x77ED;&#x3002;&#x7B2C;&#x4E09;&#x4E2A;&#x4F18;&#x70B9;&#x5728;&#x4E8E;&#x7531;&#x4E8E;&#x53EA;&#x6709;&#x5F53;&#x5929;&#x8FDB;&#x884C;&#x4E86;&#x5907;&#x4EFD;&#x624D;&#x4F1A;&#x521B;&#x5EFA;&#x76F8;&#x5E94;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x72EC;&#x7ACB;&#x7684;&#x76EE;&#x5F55;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x4F60;&#x5FEB;&#x901F;&#x5730;&#x68C0;&#x67E5;&#x6BCF;&#x5929;&#x662F;&#x5426;&#x90FD;&#x8FDB;&#x884C;&#x4E86;&#x5907;&#x4EFD;&#x3002;</p>
<p>&#x4FDD;&#x5B58;&#x4E3A; <code>backup_ver2.py</code>&#xFF1A;</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># 1. &#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x4E0E;&#x76EE;&#x5F55;&#x5C06;&#x88AB;</span>
<span class="hljs-comment"># &#x6307;&#x5B9A;&#x5728;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x4E2D;&#x3002;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#x5728; Windows &#x4E0B;&#xFF1A;</span>
<span class="hljs-comment"># source = [&apos;&quot;C:\\My Documents&quot;&apos;, &apos;C:\\Code&apos;]</span>
<span class="hljs-comment"># &#x53C8;&#x4F8B;&#x5982;&#x5728; Mac OS X &#x4E0E; Linux &#x4E0B;&#xFF1A;</span>
source = [<span class="hljs-string">&apos;/Users/swa/notes&apos;</span>]
<span class="hljs-comment"># &#x5728;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x5230;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x4F7F;&#x7528;&#x53CC;&#x5F15;&#x53F7;</span>
<span class="hljs-comment"># &#x7528;&#x4EE5;&#x62EC;&#x8D77;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x7A7A;&#x683C;&#x7684;&#x540D;&#x79F0;&#x3002;</span>

<span class="hljs-comment"># 2. &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;</span>
<span class="hljs-comment"># &#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E2D;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#x5728; Windows &#x4E0B;&#xFF1A;</span>
<span class="hljs-comment"># target_dir = &apos;E:\\Backup&apos;</span>
<span class="hljs-comment"># &#x53C8;&#x4F8B;&#x5982;&#x5728; Mac OS X &#x548C; Linux &#x4E0B;&#xFF1A;</span>
target_dir = <span class="hljs-string">&apos;/Users/swa/backup&apos;</span>
<span class="hljs-comment"># &#x8981;&#x8BB0;&#x5F97;&#x5C06;&#x8FD9;&#x91CC;&#x7684;&#x76EE;&#x5F55;&#x5730;&#x5740;&#x4FEE;&#x6539;&#x81F3;&#x4F60;&#x5C06;&#x4F7F;&#x7528;&#x7684;&#x8DEF;&#x5F84;</span>

<span class="hljs-comment"># &#x5982;&#x679C;&#x76EE;&#x6807;&#x76EE;&#x5F55;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x521B;&#x5EFA;&#x76EE;&#x5F55;</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(target_dir):
    os.mkdir(target_dir)  <span class="hljs-comment"># &#x521B;&#x5EFA;&#x76EE;&#x5F55;</span>

<span class="hljs-comment"># 3. &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5C06;&#x6253;&#x5305;&#x538B;&#x7F29;&#x6210; zip &#x6587;&#x4EF6;&#x3002;</span>
<span class="hljs-comment"># 4. &#x5C06;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x4F5C;&#x4E3A;&#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x5B50;&#x76EE;&#x5F55;&#x540D;&#x79F0;</span>
today = target_dir + os.sep + time.strftime(<span class="hljs-string">&apos;%Y%m%d&apos;</span>)
<span class="hljs-comment"># &#x5C06;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x4F5C;&#x4E3A; zip &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;</span>
now = time.strftime(<span class="hljs-string">&apos;%H%M%S&apos;</span>)

<span class="hljs-comment"># zip &#x6587;&#x4EF6;&#x540D;&#x79F0;&#x683C;&#x5F0F;</span>
target = today + os.sep + now + <span class="hljs-string">&apos;.zip&apos;</span>

<span class="hljs-comment"># &#x5982;&#x679C;&#x5B50;&#x76EE;&#x5F55;&#x5C1A;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(today):
    os.mkdir(today)
    print(<span class="hljs-string">&apos;Successfully created directory&apos;</span>, today)

<span class="hljs-comment"># 5. &#x6211;&#x4EEC;&#x4F7F;&#x7528; zip &#x547D;&#x4EE4;&#x5C06;&#x6587;&#x4EF6;&#x6253;&#x5305;&#x6210; zip &#x683C;&#x5F0F;</span>
zip_command = <span class="hljs-string">&apos;zip -r {0} {1}&apos;</span>.format(target,
                                      <span class="hljs-string">&apos; &apos;</span>.join(source))

<span class="hljs-comment"># &#x8FD0;&#x884C;&#x5907;&#x4EFD;</span>
print(<span class="hljs-string">&apos;Zip command is:&apos;</span>)
print(zip_command)
print(<span class="hljs-string">&apos;Running:&apos;</span>)
<span class="hljs-keyword">if</span> os.system(zip_command) == <span class="hljs-number">0</span>:
    print(<span class="hljs-string">&apos;Successful backup to&apos;</span>, target)
<span class="hljs-keyword">else</span>:
    print(<span class="hljs-string">&apos;Backup FAILED&apos;</span>)
</code></pre>

<p>&#x8F93;&#x51FA;&#xFF1A;</p>
<pre><code>$ python backup_ver2.py
Successfully created directory /Users/swa/backup/20140329
Zip command is:
zip -r /Users/swa/backup/20140329/073201.zip /Users/swa/notes
Running:
  adding: Users/swa/notes/ (stored 0%)
  adding: Users/swa/notes/blah1.txt (stored 0%)
  adding: Users/swa/notes/blah2.txt (stored 0%)
  adding: Users/swa/notes/blah3.txt (stored 0%)
Successful backup to /Users/swa/backup/20140329/073201.zip
</code></pre>

<p><strong>&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;</strong></p>
<p>&#x7A0B;&#x5E8F;&#x7684;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#x3002;&#x6709;&#x6240;&#x6539;&#x53D8;&#x7684;&#x90E8;&#x5206;&#x662F;&#x6211;&#x4EEC;&#x901A;&#x8FC7; <code>os.path.exists</code> &#x51FD;&#x6570;&#x6765;&#x68C0;&#x67E5;&#x4E3B;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E2D;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E86;&#x4EE5;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x4F5C;&#x4E3A;&#x540D;&#x79F0;&#x7684;&#x5B50;&#x76EE;&#x5F55;&#x3002;&#x5982;&#x679C;&#x5C1A;&#x672A;&#x5B58;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7; <code>os.mkdir</code> &#x51FD;&#x6570;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x3002;</p>
<h2 id="&#x7B2C;&#x4E09;&#x7248;">&#x7B2C;&#x4E09;&#x7248;</h2>
<p>&#x7B2C;&#x4E8C;&#x7248;&#x5728;&#x6211;&#x8981;&#x5236;&#x4F5C;&#x591A;&#x4EFD;&#x5907;&#x4EFD;&#x65F6;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F46;&#x5F53;&#x5907;&#x4EFD;&#x6570;&#x91CF;&#x8FC7;&#x4E8E;&#x5E9E;&#x5927;&#x65F6;&#xFF0C;&#x6211;&#x4FBF;&#x5F88;&#x96BE;&#x627E;&#x51FA;&#x5907;&#x4EFD;&#x4E4B;&#x95F4;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x4E86;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x53EF;&#x80FD;&#x5BF9;&#x6211;&#x7684;&#x7A0B;&#x5E8F;&#x6216;&#x8005;&#x6F14;&#x793A;&#x6587;&#x7A3F;&#x505A;&#x4E86;&#x91CD;&#x5927;&#x4FEE;&#x6539;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x60F3;&#x5C06;&#x8FD9;&#x4E9B;&#x4FEE;&#x6539;&#x4E0E; zip &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x4EA7;&#x751F;&#x5173;&#x8054;&#x3002;&#x8FD9;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x7684;&#x6CE8;&#x91CA;&#x5185;&#x5BB9;&#x6DFB;&#x52A0;&#x5230;&#x6587;&#x4EF6;&#x540D;&#x4E2D;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x9884;&#x5148;&#x63D0;&#x9192;&#xFF1A;&#x4E0B;&#x9762;&#x7ED9;&#x51FA;&#x7684;&#x7A0B;&#x5E8F;&#x5C06;&#x4E0D;&#x4F1A;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5FC5;&#x60CA;&#x614C;&#xFF0C;&#x53EA;&#x9700;&#x8DDF;&#x7740;&#x6848;&#x4F8B;&#x53BB;&#x505A;&#x56E0;&#x4E3A;&#x4F60;&#x8981;&#x5728;&#x91CC;&#x9762;&#x5B66;&#x4E0A;&#x4E00;&#x8BFE;&#x3002;</p>
<p>&#x4FDD;&#x5B58;&#x4E3A; <code>backup_ver3.py</code>&#xFF1A;</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># 1. &#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x4E0E;&#x76EE;&#x5F55;&#x5C06;&#x88AB;</span>
<span class="hljs-comment"># &#x6307;&#x5B9A;&#x5728;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x4E2D;&#x3002;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#x5728; Windows &#x4E0B;&#xFF1A;</span>
<span class="hljs-comment"># source = [&apos;&quot;C:\\My Documents&quot;&apos;, &apos;C:\\Code&apos;]</span>
<span class="hljs-comment"># &#x53C8;&#x4F8B;&#x5982;&#x5728; Mac OS X &#x4E0E; Linux &#x4E0B;&#xFF1A;</span>
source = [<span class="hljs-string">&apos;/Users/swa/notes&apos;</span>]
<span class="hljs-comment"># &#x5728;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x5230;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x4F7F;&#x7528;&#x53CC;&#x5F15;&#x53F7;</span>
<span class="hljs-comment"># &#x7528;&#x4EE5;&#x62EC;&#x8D77;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x7A7A;&#x683C;&#x7684;&#x540D;&#x79F0;&#x3002;</span>

<span class="hljs-comment"># 2. &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;</span>
<span class="hljs-comment"># &#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E2D;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#x5728; Windows &#x4E0B;&#xFF1A;</span>
<span class="hljs-comment"># target_dir = &apos;E:\\Backup&apos;</span>
<span class="hljs-comment"># &#x53C8;&#x4F8B;&#x5982;&#x5728; Mac OS X &#x548C; Linux &#x4E0B;&#xFF1A;</span>
target_dir = <span class="hljs-string">&apos;/Users/swa/backup&apos;</span>
<span class="hljs-comment"># &#x8981;&#x8BB0;&#x5F97;&#x5C06;&#x8FD9;&#x91CC;&#x7684;&#x76EE;&#x5F55;&#x5730;&#x5740;&#x4FEE;&#x6539;&#x81F3;&#x4F60;&#x5C06;&#x4F7F;&#x7528;&#x7684;&#x8DEF;&#x5F84;</span>

<span class="hljs-comment"># &#x5982;&#x679C;&#x76EE;&#x6807;&#x76EE;&#x5F55;&#x8FD8;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8FDB;&#x884C;&#x521B;&#x5EFA;</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(target_dir):
    os.mkdir(target_dir)  <span class="hljs-comment"># &#x521B;&#x5EFA;&#x76EE;&#x5F55;</span>

<span class="hljs-comment"># 3. &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5C06;&#x6253;&#x5305;&#x538B;&#x7F29;&#x6210; zip &#x6587;&#x4EF6;&#x3002;</span>
<span class="hljs-comment"># 4. &#x5C06;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x4F5C;&#x4E3A;&#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E0B;&#x7684;</span>
<span class="hljs-comment"># &#x5B50;&#x76EE;&#x5F55;&#x540D;&#x79F0;</span>
today = target_dir + os.sep + time.strftime(<span class="hljs-string">&apos;%Y%m%d&apos;</span>)
<span class="hljs-comment"># &#x5C06;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x4F5C;&#x4E3A; zip &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;</span>
now = time.strftime(<span class="hljs-string">&apos;%H%M%S&apos;</span>)

<span class="hljs-comment"># &#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x6765;&#x81EA;&#x7528;&#x6237;&#x7684;&#x6CE8;&#x91CA;&#x4EE5;&#x521B;&#x5EFA;</span>
<span class="hljs-comment"># zip &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;</span>
comment = input(<span class="hljs-string">&apos;Enter a comment --&gt; &apos;</span>)
<span class="hljs-comment"># &#x68C0;&#x67E5;&#x662F;&#x5426;&#x6709;&#x8BC4;&#x8BBA;&#x952E;&#x5165;</span>
<span class="hljs-keyword">if</span> len(comment) == <span class="hljs-number">0</span>:
    target = today + os.sep + now + <span class="hljs-string">&apos;.zip&apos;</span>
<span class="hljs-keyword">else</span>:
    target = today + os.sep + now + <span class="hljs-string">&apos;_&apos;</span> +
        comment.replace(<span class="hljs-string">&apos; &apos;</span>, <span class="hljs-string">&apos;_&apos;</span>) + <span class="hljs-string">&apos;.zip&apos;</span>

<span class="hljs-comment"># &#x5982;&#x679C;&#x5B50;&#x76EE;&#x5F55;&#x5C1A;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(today):
    os.mkdir(today)
    print(<span class="hljs-string">&apos;Successfully created directory&apos;</span>, today)

<span class="hljs-comment"># 5. &#x6211;&#x4EEC;&#x4F7F;&#x7528; zip &#x547D;&#x4EE4;&#x5C06;&#x6587;&#x4EF6;&#x6253;&#x5305;&#x6210; zip &#x683C;&#x5F0F;</span>
zip_command = <span class="hljs-string">&quot;zip -r {0} {1}&quot;</span>.format(target,
                                      <span class="hljs-string">&apos; &apos;</span>.join(source))

<span class="hljs-comment"># &#x8FD0;&#x884C;&#x5907;&#x4EFD;</span>
print(<span class="hljs-string">&apos;Zip command is:&apos;</span>)
print(zip_command)
print(<span class="hljs-string">&apos;Running:&apos;</span>)
<span class="hljs-keyword">if</span> os.system(zip_command) == <span class="hljs-number">0</span>:
    print(<span class="hljs-string">&apos;Successful backup to&apos;</span>, target)
<span class="hljs-keyword">else</span>:
    print(<span class="hljs-string">&apos;Backup FAILED&apos;</span>)
</code></pre>

<p>&#x8F93;&#x51FA;&#xFF1A;</p>
<pre><code>$ python backup_ver3.py
  File &quot;backup_ver3.py&quot;, line 39
    target = today + os.sep + now + &apos;_&apos; +
                                        ^
SyntaxError: invalid syntax
</code></pre>

<p><strong>&#x5B83;&#x662F;&#x5982;&#x4F55;&#xFF08;&#x4E0D;&#xFF09;&#x5DE5;&#x4F5C;&#x7684;</strong></p>
<p><em>&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#x5B83;&#x8DD1;&#x4E0D;&#x8D77;&#x6765;&#xFF01;</em>Python &#x4F1A;&#x8BF4;&#x7A0B;&#x5E8F;&#x4E4B;&#x4E2D;&#x5B58;&#x5728;&#x7740;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x811A;&#x672C;&#x5E76;&#x672A;&#x62E5;&#x6709; Python &#x671F;&#x671B;&#x770B;&#x89C1;&#x7684;&#x7ED3;&#x6784;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x89C2;&#x5BDF; Python &#x7ED9;&#x51FA;&#x7684;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x4F1A;&#x770B;&#x89C1;&#x5B83;&#x540C;&#x65F6;&#x4E5F;&#x544A;&#x8BC9;&#x6211;&#x4EEC;&#x5B83;&#x68C0;&#x6D4B;&#x5230;&#x9519;&#x8BEF;&#x7684;&#x989D;&#x5730;&#x65B9;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x4ECE;&#x90A3;&#x4E2A;&#x5730;&#x65B9;&#x5F00;&#x59CB;&#x5BF9;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C; <em>Debug</em> &#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x4ED4;&#x7EC6;&#x89C2;&#x5BDF;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x6709;&#x4E00;&#x72EC;&#x7ACB;&#x7684;&#x903B;&#x8F91;&#x884C;&#x88AB;&#x5206;&#x6210;&#x4E86;&#x4E24;&#x884C;&#x7269;&#x7406;&#x884C;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x5E76;&#x672A;&#x6307;&#x5B9A;&#x8FD9;&#x4E24;&#x884C;&#x7269;&#x7406;&#x884C;&#x5E94;&#x8BE5;&#x662F;&#x4E00;&#x8D77;&#x7684;&#x3002;&#x57FA;&#x672C;&#x4E0A;&#xFF0C;Python &#x5DF2;&#x7ECF;&#x53D1;&#x73B0;&#x4E86;&#x8BE5;&#x903B;&#x8F91;&#x884C;&#x4E2D;&#x7684;&#x52A0;&#x6CD5;&#x8FD0;&#x7B97;&#x7B26;&#xFF08;<code>+</code>&#xFF09;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#x6570;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x4E0D;&#x77E5;&#x9053;&#x63A5;&#x4E0B;&#x6765;&#x5E94;&#x5F53;&#x5982;&#x4F55;&#x7EE7;&#x7EED;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F5C;&#x51FA;&#x4FEE;&#x6B63;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#x5E76;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4FEE;&#x6B63;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x4E3A;<em>&#x201C;&#x9519;&#x8BEF;&#x4FEE;&#x590D;&#xFF08;Bug Fixing&#xFF09;&#x201D;</em>&#x3002;</p>
<h2 id="&#x7B2C;&#x56DB;&#x7248;">&#x7B2C;&#x56DB;&#x7248;</h2>
<p>&#x4FDD;&#x5B58;&#x4E3A; <code>backup_ver4.py</code>&#xFF1A;</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># 1. &#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x4E0E;&#x76EE;&#x5F55;&#x5C06;&#x88AB;</span>
<span class="hljs-comment"># &#x6307;&#x5B9A;&#x5728;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x4E2D;&#x3002;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#x5728; Windows &#x4E0B;&#xFF1A;</span>
<span class="hljs-comment"># source = [&apos;&quot;C:\\My Documents&quot;&apos;, &apos;C:\\Code&apos;]</span>
<span class="hljs-comment"># &#x53C8;&#x4F8B;&#x5982;&#x5728; Mac OS X &#x4E0E; Linux &#x4E0B;&#xFF1A;</span>
source = [<span class="hljs-string">&apos;/Users/swa/notes&apos;</span>]
<span class="hljs-comment"># &#x5728;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x5230;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x4F7F;&#x7528;&#x53CC;&#x5F15;&#x53F7;</span>
<span class="hljs-comment"># &#x7528;&#x4EE5;&#x62EC;&#x8D77;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x7A7A;&#x683C;&#x7684;&#x540D;&#x79F0;&#x3002;</span>

<span class="hljs-comment"># 2. &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;</span>
<span class="hljs-comment"># &#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E2D;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#x5728; Windows &#x4E0B;&#xFF1A;</span>
<span class="hljs-comment"># target_dir = &apos;E:\\Backup&apos;</span>
<span class="hljs-comment"># &#x53C8;&#x4F8B;&#x5982;&#x5728; Mac OS X &#x548C; Linux &#x4E0B;&#xFF1A;</span>
target_dir = <span class="hljs-string">&apos;/Users/swa/backup&apos;</span>
<span class="hljs-comment"># &#x8981;&#x8BB0;&#x5F97;&#x5C06;&#x8FD9;&#x91CC;&#x7684;&#x76EE;&#x5F55;&#x5730;&#x5740;&#x4FEE;&#x6539;&#x81F3;&#x4F60;&#x5C06;&#x4F7F;&#x7528;&#x7684;&#x8DEF;&#x5F84;</span>

<span class="hljs-comment"># &#x5982;&#x679C;&#x76EE;&#x6807;&#x76EE;&#x5F55;&#x8FD8;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8FDB;&#x884C;&#x521B;&#x5EFA;</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(target_dir):
    os.mkdir(target_dir)  <span class="hljs-comment"># &#x521B;&#x5EFA;&#x76EE;&#x5F55;</span>

<span class="hljs-comment"># 3. &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5C06;&#x6253;&#x5305;&#x538B;&#x7F29;&#x6210; zip &#x6587;&#x4EF6;&#x3002;</span>
<span class="hljs-comment"># 4. &#x5C06;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x4F5C;&#x4E3A;&#x4E3B;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E0B;&#x7684;</span>
<span class="hljs-comment"># &#x5B50;&#x76EE;&#x5F55;&#x540D;&#x79F0;</span>
today = target_dir + os.sep + time.strftime(<span class="hljs-string">&apos;%Y%m%d&apos;</span>)
<span class="hljs-comment"># &#x5C06;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x4F5C;&#x4E3A; zip &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;</span>
now = time.strftime(<span class="hljs-string">&apos;%H%M%S&apos;</span>)

<span class="hljs-comment"># &#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x6765;&#x81EA;&#x7528;&#x6237;&#x7684;&#x6CE8;&#x91CA;&#x4EE5;&#x521B;&#x5EFA;</span>
<span class="hljs-comment"># zip &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;</span>
comment = input(<span class="hljs-string">&apos;Enter a comment --&gt; &apos;</span>)
<span class="hljs-comment"># &#x68C0;&#x67E5;&#x662F;&#x5426;&#x6709;&#x8BC4;&#x8BBA;&#x952E;&#x5165;</span>
<span class="hljs-keyword">if</span> len(comment) == <span class="hljs-number">0</span>:
    target = today + os.sep + now + <span class="hljs-string">&apos;.zip&apos;</span>
<span class="hljs-keyword">else</span>:
    target = today + os.sep + now + <span class="hljs-string">&apos;_&apos;</span> + \
        comment.replace(<span class="hljs-string">&apos; &apos;</span>, <span class="hljs-string">&apos;_&apos;</span>) + <span class="hljs-string">&apos;.zip&apos;</span>

<span class="hljs-comment"># &#x5982;&#x679C;&#x5B50;&#x76EE;&#x5F55;&#x5C1A;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(today):
    os.mkdir(today)
    print(<span class="hljs-string">&apos;Successfully created directory&apos;</span>, today)

<span class="hljs-comment"># 5. &#x6211;&#x4EEC;&#x4F7F;&#x7528; zip &#x547D;&#x4EE4;&#x5C06;&#x6587;&#x4EF6;&#x6253;&#x5305;&#x6210; zip &#x683C;&#x5F0F;</span>
zip_command = <span class="hljs-string">&apos;zip -r {0} {1}&apos;</span>.format(target,
                                      <span class="hljs-string">&apos; &apos;</span>.join(source))

<span class="hljs-comment"># &#x8FD0;&#x884C;&#x5907;&#x4EFD;</span>
print(<span class="hljs-string">&apos;Zip command is:&apos;</span>)
print(zip_command)
print(<span class="hljs-string">&apos;Running:&apos;</span>)
<span class="hljs-keyword">if</span> os.system(zip_command) == <span class="hljs-number">0</span>:
    print(<span class="hljs-string">&apos;Successful backup to&apos;</span>, target)
<span class="hljs-keyword">else</span>:
    print(<span class="hljs-string">&apos;Backup FAILED&apos;</span>)
</code></pre>

<p>&#x8F93;&#x51FA;&#xFF1A;</p>
<pre><code>$ python backup_ver4.py
Enter a comment --&gt; added new examples
Zip command is:
zip -r /Users/swa/backup/20140329/074122_added_new_examples.zip /Users/swa/notes
Running:
  adding: Users/swa/notes/ (stored 0%)
  adding: Users/swa/notes/blah1.txt (stored 0%)
  adding: Users/swa/notes/blah2.txt (stored 0%)
  adding: Users/swa/notes/blah3.txt (stored 0%)
Successful backup to /Users/swa/backup/20140329/074122_added_new_examples.zip
</code></pre>

<p><strong>&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;</strong></p>
<p>&#x73B0;&#x5728;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x4E86;&#xFF01;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#x6211;&#x4EEC;&#x5728;&#x7B2C;&#x4E09;&#x7248;&#x4E2D;&#x6240;&#x4F5C;&#x51FA;&#x7684;&#x5B9E;&#x9645;&#x7684;&#x589E;&#x5F3A;&#x5DE5;&#x4F5C;&#x3002;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>input</code> &#x51FD;&#x6570;&#x6765;&#x63A5;&#x53D7;&#x7528;&#x6237;&#x7684;&#x6CE8;&#x91CA;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x901A;&#x8FC7; <code>len</code> &#x51FD;&#x6570;&#x6765;&#x68C0;&#x67E5;&#x8F93;&#x5165;&#x5185;&#x5BB9;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x4EE5;&#x68C0;&#x67E5;&#x7528;&#x6237;&#x662F;&#x5426;&#x786E;&#x5B9E;&#x8F93;&#x5165;&#x4E86;&#x4EC0;&#x4E48;&#x5185;&#x5BB9;&#x3002;&#x5982;&#x679C;&#x7528;&#x6237;&#x672A;&#x8F93;&#x5165;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#x800C;&#x76F4;&#x63A5;&#x6572;&#x4E0B;&#x4E86; <code>enter</code> &#x952E;&#xFF08;&#x4E5F;&#x8BB8;&#x8FD9;&#x4EFD;&#x5907;&#x4EFD;&#x53EA;&#x662F;&#x4E00;&#x4EFD;&#x4F8B;&#x884C;&#x5907;&#x4EFD;&#x800C;&#x6CA1;&#x4F5C;&#x51FA;&#x4EC0;&#x4E48;&#x7279;&#x6B8A;&#x7684;&#x4FEE;&#x6539;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C06;&#x7EE7;&#x7EED;&#x6211;&#x4EEC;&#x4EE5;&#x524D;&#x6240;&#x505A;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x8F93;&#x5165;&#x4E86;&#x67D0;&#x4E9B;&#x6CE8;&#x91CA;&#x5185;&#x5BB9;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C06;&#x4F1A;&#x88AB;&#x9644;&#x52A0;&#x8FDB; zip &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x4E4B;&#x4E2D;&#xFF0C;&#x5904;&#x5728; <code>.zip</code> &#x6269;&#x5C55;&#x540D;&#x4E4B;&#x524D;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x6211;&#x4EEC;&#x7528;&#x4E0B;&#x5212;&#x7EBF;&#x66FF;&#x6362;&#x6CE8;&#x91CA;&#x4E2D;&#x7684;&#x7A7A;&#x683C;&#x2014;&#x2014;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x7BA1;&#x7406;&#x6CA1;&#x6709;&#x7A7A;&#x683C;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x603B;&#x4F1A;&#x5BB9;&#x6613;&#x5F97;&#x591A;&#x3002;</p>
<h2 id="&#x7EE7;&#x7EED;&#x6539;&#x8FDB;">&#x7EE7;&#x7EED;&#x6539;&#x8FDB;</h2>
<p>&#x7B2C;&#x56DB;&#x7248;&#x7A0B;&#x5E8F;&#x5DF2;&#x7ECF;&#x662F;&#x4E00;&#x4EFD;&#x5BF9;&#x5927;&#x591A;&#x6570;&#x7528;&#x6237;&#x6765;&#x8BF4;&#x90FD;&#x80FD;&#x4EE4;&#x4EBA;&#x6EE1;&#x610F;&#x5730;&#x5DE5;&#x4F5C;&#x8FD0;&#x884C;&#x7684;&#x811A;&#x672C;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x603B;&#x4F1A;&#x6709;&#x6539;&#x8FDB;&#x7684;&#x4F59;&#x5730;&#x5728;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#x6DFB;&#x52A0; <code>-v</code> &#x9009;&#x9879;&#x6765;&#x6307;&#x5B9A;&#x7A0B;&#x5E8F;&#x7684;&#x663E;&#x793A;&#x4FE1;&#x606F;&#x7684;<em>&#x8BE6;&#x5C3D;</em><sup><a href="#fn_1" id="reffn_1">1</a></sup>&#x7A0B;&#x5EA6;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x4F60;&#x7684;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x66F4;&#x5177;&#x8BF4;&#x670D;&#x529B;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x6DFB;&#x52A0; <code>-q</code> &#x9009;&#x9879;&#x4F7F;&#x7A0B;&#x5E8F;&#x80FD;<em>&#x9759;&#x9ED8;&#xFF08;Quiet&#xFF09;</em>&#x8FD0;&#x884C;&#x3002;</p>
<p>&#x53E6;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x589E;&#x5F3A;&#x7684;&#x65B9;&#x5411;&#x662F;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x5141;&#x8BB8;&#x989D;&#x5916;&#x7684;&#x6587;&#x4EF6;&#x4E0E;&#x76EE;&#x5F55;&#x4F20;&#x9012;&#x5230;&#x811A;&#x672C;&#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE; <code>sys.argv</code> &#x5217;&#x8868;&#x4E2D;&#x83B7;&#x5F97;&#x8FD9;&#x4E9B;&#x540D;&#x79F0;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>list</code> &#x7C7B;&#x63D0;&#x4F9B;&#x7684; <code>extend</code> &#x65B9;&#x6CD5;&#x628A;&#x5B83;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;&#x6211;&#x4EEC;&#x7684; <code>source</code> &#x5217;&#x8868;&#x4E2D;.</p>
<p>&#x6700;&#x91CD;&#x8981;&#x7684;&#x6539;&#x8FDB;&#x65B9;&#x5411;&#x662F;&#x4E0D;&#x4F7F;&#x7528; <code>os.system</code> &#x65B9;&#x6CD5;&#x6765;&#x521B;&#x5EFA;&#x5F52;&#x6863;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528; <a href="http://docs.python.org/3/library/zipfile.html" target="_blank">zipfile</a> &#x6216; <a href="http://docs.python.org/3/library/tarfile.html" target="_blank">tarfile</a> &#x5185;&#x7F6E;&#x7684;&#x6A21;&#x5757;&#x6765;&#x521B;&#x5EFA;&#x5B83;&#x4EEC;&#x7684;&#x5F52;&#x6863;&#x6587;&#x4EF6;&#x3002;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x6807;&#x51C6;&#x5E93;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x968F;&#x65F6;&#x4F9B;&#x4F60;&#x5728;&#x4F60;&#x7684;&#x7535;&#x8111;&#x4E0A;&#x6CA1;&#x6709; zip &#x7A0B;&#x5E8F;&#x4F5C;&#x4E3A;&#x6CA1;&#x6709;&#x5916;&#x90E8;&#x4F9D;&#x8D56;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4E00;&#x76F4;&#x90FD;&#x5728;&#x4F7F;&#x7528; <code>os.system</code> &#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4F5C;&#x4E3A;&#x521B;&#x5EFA;&#x5907;&#x4EFD;&#x7684;&#x624B;&#x6BB5;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x4FDD;&#x8BC1;&#x6848;&#x4F8B;&#x5BF9;&#x4E8E;&#x6240;&#x6709;&#x4EBA;&#x6765;&#x8BF4;&#x90FD;&#x8DB3;&#x591F;&#x7B80;&#x5355;&#x540C;&#x65F6;&#x4E5F;&#x786E;&#x5B9E;&#x6709;&#x7528;&#x3002;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x8BD5;&#x8BD5;&#x7F16;&#x5199;&#x7B2C;&#x4E94;&#x7248;&#x811A;&#x672C;&#x5417;&#xFF1F;&#x5728;&#x811A;&#x672C;&#x4E2D;&#x4F7F;&#x7528; <a href="http://docs.python.org/3/library/zipfile.html" target="_blank">zipfile</a> &#x6A21;&#x5757;&#x800C;&#x975E; <code>os.system</code> &#x8C03;&#x7528;&#x3002;</p>
<h2 id="&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x6D41;&#x7A0B;">&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x6D41;&#x7A0B;</h2>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x7ECF;&#x5386;&#x4E86;&#x5F00;&#x53D1;&#x4E00;&#x6B3E;&#x8F6F;&#x4EF6;&#x7684;&#x6D41;&#x7A0B;&#x4E2D;&#x7684;&#x5404;&#x4E2A;<code>&#x9636;&#x6BB5;&#xFF08;Phases&#xFF09;</code>&#x3002;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x9636;&#x6BB5;&#x603B;&#x7ED3;&#x5982;&#x4E0B;&#xFF1A;</p>
<ol>
<li>What/&#x505A;&#x4EC0;&#x4E48;&#xFF08;&#x5206;&#x6790;&#xFF09;</li>
<li>How/&#x600E;&#x4E48;&#x505A;&#xFF08;&#x8BBE;&#x8BA1;&#xFF09;</li>
<li>Do It/&#x5F00;&#x59CB;&#x505A;&#xFF08;&#x6267;&#x884C;&#xFF09;</li>
<li>Test/&#x6D4B;&#x8BD5;&#xFF08;&#x6D4B;&#x8BD5;&#x4E0E;&#x4FEE;&#x590D;&#x9519;&#x8BEF;&#xFF09;</li>
<li>Use/&#x4F7F;&#x7528;&#xFF08;&#x64CD;&#x4F5C;&#x6216;&#x5F00;&#x53D1;&#xFF09;</li>
<li>Maintain/&#x7EF4;&#x62A4;&#xFF08;&#x6539;&#x8FDB;&#xFF09;</li>
</ol>
<p>&#x7F16;&#x5199;&#x7A0B;&#x5E8F;&#x65F6;&#x63A8;&#x8350;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x9075;&#x5FAA;&#x6211;&#x4EEC;&#x5728;&#x7F16;&#x5199;&#x5907;&#x4EFD;&#x811A;&#x672C;&#x65F6;&#x6240;&#x7ECF;&#x5386;&#x7684;&#x6B65;&#x9AA4;&#xFF1A;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x4E0E;&#x8BBE;&#x8BA1;&#xFF1B;&#x5F00;&#x59CB;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7248;&#x672C;&#xFF1B;&#x6D4B;&#x8BD5;&#x5E76;&#x4FEE;&#x590D;&#x9519;&#x8BEF;&#xFF1B;&#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x4EE5;&#x786E;&#x4FDD;&#x5DE5;&#x4F5C;&#x72B6;&#x51B5;&#x7686;&#x5982;&#x671F;&#x671B;&#x90A3;&#x822C;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4EFB;&#x4F55;&#x4F60;&#x6240;&#x5E0C;&#x671B;&#x62E5;&#x6709;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x7EE7;&#x7EED;&#x53BB;&#x91CD;&#x590D;&#x8FD9;&#x4E00;&#x201C;&#x5F00;&#x59CB;&#x505A;&#x2014;&#x6D4B;&#x8BD5;&#x2014;&#x4F7F;&#x7528;&#x201D;&#x5FAA;&#x73AF;&#xFF0C;&#x9700;&#x8981;&#x505A;&#x591A;&#x5C11;&#x6B21;&#x5C31;&#x53BB;&#x505A;&#x591A;&#x5C11;&#x6B21;&#x3002;</p>
<p>&#x8981;&#x8BB0;&#x4F4F;&#xFF1A;</p>
<blockquote>
<p>&#x7A0B;&#x5E8F;&#x662F;&#x6210;&#x957F;&#x8D77;&#x6765;&#x7684;&#xFF0C;&#x4E0D;&#x662F;&#x642D;&#x5EFA;&#x51FA;&#x6765;&#x7684;&#x3002;
&#xFF08;Software is grown, not built.&#xFF09;
&#x2014;&#x2014;<a href="http://97things.oreilly.com/wiki/index.php/Great_software_is_not_built,_it_is_grown" target="_blank">Bill de h&#xD3;ra</a></p>
</blockquote>
<h2 id="&#x603B;&#x7ED3;">&#x603B;&#x7ED3;</h2>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x770B;&#x5230;&#x4E86;&#x5982;&#x4F55;&#x521B;&#x5EFA;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684; Python &#x7A0B;&#x5E8F;&#x4E0E;&#x811A;&#x672C;&#xFF0C;&#x4E5F;&#x4E86;&#x89E3;&#x4E86;&#x7F16;&#x5199;&#x8FD9;&#x4E9B;&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x7ECF;&#x5386;&#x7684;&#x6570;&#x4E2A;&#x9636;&#x6BB5;&#x3002;&#x6216;&#x8BB8;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x6211;&#x4EEC;&#x5728;&#x672C;&#x7AE0;&#x4E2D;&#x5B66;&#x4E60;&#x7684;&#x5185;&#x5BB9;&#x5BF9;&#x4E8E;&#x7F16;&#x5199;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x7A0B;&#x5E8F;&#x5F88;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x5C31;&#x80FD;&#x6162;&#x6162;&#x4E60;&#x60EF; Python&#xFF0C;&#x540C;&#x6837;&#x5305;&#x62EC;&#x5B83;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8BA8;&#x8BBA;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#x3002;</p>
<hr>
<blockquote id="fn_1">
<sup>1</sup>. &#x539F;&#x6587;&#x4F5C; Verbosity&#xFF0C;&#x6C88;&#x6D01;&#x5143;&#x8BD1;&#x672C;&#x8BD1;&#x4F5C;&#x201C;&#x4EA4;&#x4E92;&#x201D;&#x3002;<a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#x21A9;</a>
</blockquote>

        </div>
    
</div>

        
    </body>
</html>

